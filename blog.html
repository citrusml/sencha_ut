---
layout: default
title: Blog
---

<div class="container my-5" style="max-width: 900px;"> <div class="tag-container mb-5 text-center"> <button class="tag-filter-btn active" onclick="filterBy('all')">All</button>
    {% for tag in site.tags %}
      {% assign tag_name = tag[0] %}
      <button class="tag-filter-btn" onclick="filterBy('{{ tag_name }}')">
        #{{ tag_name }}
      </button>
    {% endfor %}
  </div>

  <div class="blog-posts">
    {% for post in site.posts %}
      <div class="post-item" data-tags="{{ post.tags | join: ',' }}">
        
        {% if post.image %}
        <div class="post-thumbnail">
          <a href="{{ post.url | relative_url }}">
            <img src="{{ post.image | relative_url }}" alt="{{ post.title }}">
          </a>
        </div>
        {% endif %}

        <div class="post-content">
          <div class="post-meta">
            <span class="post-date">{{ post.date | date: "%Y.%m.%d" }}</span> <span class="post-tags-display">
              {% for tag in post.tags %} #{{ tag }} {% endfor %}
            </span>
          </div>

          <h3 class="post-title">
            <a href="{{ post.url | relative_url }}">{{ post.title }}</a>
          </h3>
          
          <div class="post-excerpt">
            {{ post.excerpt | strip_html | truncate: 80 }}
          </div>
          
          <a href="{{ post.url | relative_url }}" class="read-more-link">続きを読む →</a>
        </div>
      </div>
    {% endfor %}
  </div>

  <div id="pagination-controls" class="mt-5 text-center">
    <button id="prevBtn" class="pagination-btn" onclick="changePage(-1)">❮ Prev</button>
    <span id="pageIndicator" class="mx-3">Page 1</span>
    <button id="nextBtn" class="pagination-btn" onclick="changePage(1)">Next ❯</button>
  </div>

</div>

<style>
  /* === 1. タグボタンのデザイン（和風・丸み） === */
  .tag-container { 
    display: flex; 
    flex-wrap: wrap; 
    gap: 10px; 
    justify-content: center;
  }
  .tag-filter-btn {
    background: #fff; 
    border: 1px solid #dcdcdc; 
    border-radius: 20px;
    padding: 6px 18px; 
    cursor: pointer; 
    font-size: 0.9rem; 
    font-family: "Zen Maru Gothic", sans-serif; /* 丸ゴシック */
    color: #666;
    transition: all 0.3s;
  }
  .tag-filter-btn:hover {
    background-color: #f0f0f0;
    color: #3d4c38;
  }
  /* 選択中のタグは抹茶色に */
  .tag-filter-btn.active {
    background: #3d4c38; 
    color: #fff; 
    border-color: #3d4c38;
  }

  /* === 2. 記事リストのデザイン === */
  .post-item {
    display: flex; 
    gap: 25px; 
    padding: 30px 0; 
    border-bottom: 1px solid #e0dcd0; /* 薄いベージュの線 */
    align-items: flex-start;
  }
  
  /* サムネイル画像 */
  .post-thumbnail { flex-shrink: 0; width: 200px; }
  .post-thumbnail img {
    width: 100%; height: 140px; object-fit: cover;
    border-radius: 4px; 
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
  }

  /* テキスト部分 */
  .post-content { flex-grow: 1; }
  
  .post-meta { 
    font-size: 0.85rem; 
    color: #888; 
    margin-bottom: 8px; 
    font-family: "Zen Maru Gothic", sans-serif;
  }
  
  /* タグの色を青から「緑」に変更 */
  .post-tags-display { 
    margin-left: 10px; 
    color: #6e8e59; /* 明るい抹茶色 */
    font-weight: bold; 
  }

  /* 記事タイトル（明朝体ではっきりと） */
  .post-title { 
    margin: 5px 0 10px; 
    font-size: 1.4rem; 
    line-height: 1.4; 
    font-family: "Shippori Mincho", serif;
  }
  .post-title a { 
    text-decoration: none; 
    color: #3d4c38; /* 濃い抹茶色 */
    transition: color 0.2s;
  }
  .post-title a:hover { 
    color: #6e8e59; 
  }

  .post-excerpt { 
    font-size: 0.95rem; 
    color: #555; 
    line-height: 1.7; 
    margin-bottom: 10px;
  }

  .read-more-link {
    font-size: 0.85rem;
    color: #6e8e59;
    text-decoration: none;
    font-weight: bold;
  }

  /* === 3. ページ切り替えボタン === */
  .pagination-btn {
    background-color: transparent;
    border: 1px solid #3d4c38;
    color: #3d4c38;
    padding: 8px 20px;
    border-radius: 4px;
    cursor: pointer;
    font-family: "Shippori Mincho", serif;
    transition: 0.3s;
  }
  .pagination-btn:hover {
    background-color: #3d4c38;
    color: #fff;
  }
  .pagination-btn:disabled {
    border-color: #ccc;
    color: #ccc;
    cursor: not-allowed;
    background-color: transparent;
  }
  #pageIndicator {
    font-family: "Zen Maru Gothic", sans-serif;
    color: #666;
  }

  /* スマホ対応 */
  @media (max-width: 600px) {
    .post-item { flex-direction: column; }
    .post-thumbnail { width: 100%; }
    .post-thumbnail img { height: 200px; }
    .tag-container { gap: 6px; }
  }
</style>

<script>
  // 設定
  const itemsPerPage = 10; 
  let currentPage = 1;
  let currentFilteredPosts = []; 

  // 初期化
  document.addEventListener("DOMContentLoaded", function() {
    const allPosts = Array.from(document.getElementsByClassName('post-item'));
    currentFilteredPosts = allPosts; 
    renderPage(); 
  });

  // 1. フィルタリング機能
  function filterBy(tagName) {
    const allPosts = Array.from(document.getElementsByClassName('post-item'));
    const buttons = document.getElementsByClassName('tag-filter-btn');

    for (let btn of buttons) {
      btn.classList.remove('active');
      if (tagName === 'all' && btn.innerText === 'All') btn.classList.add('active');
      else if (btn.innerText.includes(tagName)) btn.classList.add('active');
    }

    if (tagName === 'all') {
      currentFilteredPosts = allPosts;
    } else {
      currentFilteredPosts = allPosts.filter(post => {
        const postTags = post.getAttribute('data-tags').split(',');
        return postTags.includes(tagName);
      });
    }

    currentPage = 1;
    renderPage();
  }

  // 2. ページ切り替え機能
  function changePage(direction) {
    const maxPage = Math.ceil(currentFilteredPosts.length / itemsPerPage);
    const nextPage = currentPage + direction;

    if (nextPage >= 1 && nextPage <= maxPage) {
      currentPage = nextPage;
      renderPage();
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }
  }

  // 3. 描画実行機能
  function renderPage() {
    const allPosts = Array.from(document.getElementsByClassName('post-item'));
    
    allPosts.forEach(post => post.style.display = 'none');

    const startIndex = (currentPage - 1) * itemsPerPage;
    const endIndex = startIndex + itemsPerPage;
    
    const postsToShow = currentFilteredPosts.slice(startIndex, endIndex);
    postsToShow.forEach(post => {
      post.style.display = 'flex'; 
    });

    updatePaginationControls();
  }

  // 4. ボタンの状態更新
  function updatePaginationControls() {
    const maxPage = Math.ceil(currentFilteredPosts.length / itemsPerPage);
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const indicator = document.getElementById('pageIndicator');

    if (maxPage === 0) {
        prevBtn.disabled = true;
        nextBtn.disabled = true;
        indicator.innerText = "記事がありません";
        return;
    }

    indicator.innerText = `Page ${currentPage} / ${maxPage}`;

    prevBtn.disabled = (currentPage === 1);
    nextBtn.disabled = (currentPage === maxPage);
  }
</script>